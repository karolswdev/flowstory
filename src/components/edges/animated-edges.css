/* ============================================
   Animated Event Edge Styles
   Uses FlowStory Design System tokens
   ============================================ */

/* Animated overlay container */
.animated-event-edge-overlays {
  pointer-events: none;
}

/* Particle glow effect */
.animated-event-edge-overlays circle[data-testid="transit-particle"] {
  will-change: offset-distance, opacity;
}

/* Emission ripple */
.animated-event-edge-overlays circle[data-testid="emit-ripple"] {
  will-change: transform, opacity;
}

/* Reception flash */
.animated-event-edge-overlays circle[data-testid="receive-flash"] {
  will-change: transform, opacity;
}

/* Active edge glow during animation */
.animated-event-edge-overlays path {
  will-change: opacity;
}

/* ============================================
   Animation Phase Indicators
   ============================================ */

/* Emitting phase - source node emphasis */
.edge-phase-emitting .event-edge-icon {
  animation: icon-pulse-emit var(--transition-fast);
}

@keyframes icon-pulse-emit {
  0% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.3); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

/* Transit phase - icon bobbing */
.edge-phase-transit .event-edge-icon {
  animation: icon-bob 0.5s ease-in-out;
}

@keyframes icon-bob {
  0%, 100% { transform: translate(-50%, -50%) translateY(0); }
  50% { transform: translate(-50%, -50%) translateY(-2px); }
}

/* Receiving phase - target emphasis */
.edge-phase-receiving .event-edge-icon {
  animation: icon-pulse-receive var(--transition-fast);
}

@keyframes icon-pulse-receive {
  0% { transform: translate(-50%, -50%) scale(1.2); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

/* ============================================
   Reduced Motion
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  .animated-event-edge-overlays * {
    animation: none !important;
    transition: none !important;
  }
  
  .event-edge-icon {
    animation: none !important;
  }
}

/* ============================================
   Event Type Color Variants
   Using design tokens
   ============================================ */
.animated-edge-published .react-flow__edge-path {
  stroke: var(--edge-success);
}

.animated-edge-subscribed .react-flow__edge-path {
  stroke: var(--edge-flow);
}

.animated-edge-command .react-flow__edge-path {
  stroke: var(--node-event-border);
}

.animated-edge-query .react-flow__edge-path {
  stroke: var(--edge-async);
}

/* ============================================
   Dark Mode
   ============================================ */
[data-theme="dark"] .animated-edge-published .react-flow__edge-path {
  stroke: var(--node-action-border);
}

[data-theme="dark"] .animated-edge-subscribed .react-flow__edge-path {
  stroke: var(--edge-flow);
}

[data-theme="dark"] .animated-edge-command .react-flow__edge-path {
  stroke: var(--node-event-border);
}

[data-theme="dark"] .animated-edge-query .react-flow__edge-path {
  stroke: var(--edge-async);
}
