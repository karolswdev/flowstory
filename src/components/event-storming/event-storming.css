/* ============================================
   Event Storming - Sticky Note Styles
   Based on standard Event Storming colors
   ============================================ */

/* ============================================
   Base Sticky Note
   ============================================ */
.es-note {
  width: 140px;
  min-height: 80px;
  padding: 10px;
  border-radius: 2px;
  font-family: 'Patrick Hand', 'Comic Sans MS', cursive, sans-serif;
  position: relative;
  box-shadow: 
    2px 2px 4px rgba(0, 0, 0, 0.2),
    0 0 1px rgba(0, 0, 0, 0.1);
  cursor: pointer;
}

.es-note::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  border-width: 0 12px 12px 0;
  border-style: solid;
}

.es-icon {
  font-size: 16px;
  display: block;
  margin-bottom: 4px;
}

.es-note-name {
  font-size: 13px;
  font-weight: 700;
  line-height: 1.2;
  word-break: break-word;
}

.es-note-desc {
  font-size: 10px;
  margin-top: 4px;
  opacity: 0.8;
  line-height: 1.3;
}

.es-note-text {
  font-size: 12px;
  line-height: 1.3;
}

/* ============================================
   Domain Event (Orange)
   ============================================ */
.es-event-note {
  background: #FF9800;
  color: #000;
}

.es-event-note::before {
  border-color: transparent #E65100 transparent transparent;
}

.es-event-data {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 6px;
}

.es-data-field {
  background: rgba(0, 0, 0, 0.1);
  padding: 2px 6px;
  border-radius: 2px;
  font-size: 9px;
  font-family: 'JetBrains Mono', monospace;
}

.es-data-more {
  font-size: 9px;
  opacity: 0.7;
}

.es-lightning {
  position: absolute;
  top: 4px;
  right: 16px;
  width: 12px;
  height: 12px;
  background: #FFE082;
  border-radius: 50%;
  filter: blur(4px);
}

/* ============================================
   Command (Blue)
   ============================================ */
.es-command-note {
  background: #2196F3;
  color: #fff;
}

.es-command-note::before {
  border-color: transparent #1565C0 transparent transparent;
}

/* ============================================
   Actor (Yellow - Small)
   ============================================ */
.es-actor-note {
  background: #FFEB3B;
  color: #000;
  width: 100px;
  min-height: 60px;
}

.es-actor-note::before {
  border-color: transparent #FBC02D transparent transparent;
}

.es-actor-icon {
  font-size: 24px;
  display: block;
  text-align: center;
  margin-bottom: 4px;
}

.es-actor-name {
  font-size: 12px;
  font-weight: 700;
  text-align: center;
}

/* ============================================
   Policy (Lilac)
   ============================================ */
.es-policy-note {
  background: #CE93D8;
  color: #000;
}

.es-policy-note::before {
  border-color: transparent #AB47BC transparent transparent;
}

/* ============================================
   Read Model (Green)
   ============================================ */
.es-readmodel-note {
  background: #81C784;
  color: #000;
}

.es-readmodel-note::before {
  border-color: transparent #4CAF50 transparent transparent;
}

/* ============================================
   External System (Pink)
   ============================================ */
.es-external-note {
  background: #F48FB1;
  color: #000;
}

.es-external-note::before {
  border-color: transparent #E91E63 transparent transparent;
}

/* ============================================
   Hotspot (Red)
   ============================================ */
.es-hotspot-note {
  background: #EF5350;
  color: #fff;
  transform: rotate(-3deg);
}

.es-hotspot-note::before {
  border-color: transparent #C62828 transparent transparent;
}

.es-hotspot-by {
  font-size: 9px;
  font-style: italic;
  margin-top: 6px;
  opacity: 0.8;
}

.es-hotspot-pulse {
  position: absolute;
  inset: -3px;
  border: 2px solid #EF5350;
  border-radius: 4px;
  pointer-events: none;
}

/* ============================================
   Aggregate (Yellow Container)
   ============================================ */
.es-aggregate {
  background: rgba(255, 193, 7, 0.15);
  border: 2px dashed #FFC107;
  border-radius: 8px;
  padding: 16px;
  min-width: 200px;
  min-height: 150px;
}

.es-aggregate-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px dashed #FFC107;
}

.es-aggregate-name {
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  font-weight: 700;
  color: #F57F17;
}

/* ============================================
   Handles
   ============================================ */
.es-handle {
  width: 8px;
  height: 8px;
  background: rgba(0, 0, 0, 0.3);
  border: 2px solid white;
}

.es-note:hover .es-handle {
  background: #333;
}

/* ============================================
   State Classes
   ============================================ */
.es-dimmed {
  opacity: 0.4;
}

.es-highlighted {
  box-shadow: 
    0 0 0 3px rgba(255, 255, 255, 0.8),
    4px 4px 8px rgba(0, 0, 0, 0.3);
  z-index: 100;
}

.es-active {
  box-shadow: 
    0 0 0 3px rgba(255, 255, 255, 0.9),
    0 0 20px rgba(255, 255, 255, 0.5),
    4px 4px 8px rgba(0, 0, 0, 0.3);
  z-index: 100;
}

.node-selected {
  outline: 3px solid #FFD700;
  outline-offset: 2px;
}

/* ============================================
   Timeline Arrow
   ============================================ */
.es-timeline {
  display: flex;
  align-items: center;
  gap: 8px;
}

.es-timeline-arrow {
  width: 40px;
  height: 2px;
  background: linear-gradient(90deg, #9E9E9E, #616161);
  position: relative;
}

.es-timeline-arrow::after {
  content: '';
  position: absolute;
  right: 0;
  top: -4px;
  border-width: 5px 0 5px 8px;
  border-style: solid;
  border-color: transparent transparent transparent #616161;
}

/* ============================================
   Dark Mode
   ============================================ */
[data-theme="dark"] .es-note {
  box-shadow: 
    2px 2px 4px rgba(0, 0, 0, 0.4),
    0 0 1px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .es-aggregate {
  background: rgba(255, 193, 7, 0.1);
}

[data-theme="dark"] .es-aggregate-name {
  color: #FFD54F;
}
