id: event-driven-solution
title: Event-Driven Architecture
description: Bounded Contexts communicating through events
version: "1.0"
actors: []

camera:
  center: [0, 0]
  zoom: 1

nodes:
  # Top row: Bounded Contexts
  - id: ed-bc
    type: system
    label: E&D BC
    description: Enrollment & Demand
    size: l
    position: { x: -250, y: -120 }
    effects:
      - type: pulse
        trigger: on-focus
        params:
          scale: 1.08
          color: "#3b82f6"

  - id: routing-bc
    type: system
    label: Routing BC
    description: Route Optimization
    size: l
    position: { x: 0, y: -120 }
    effects:
      - type: pulse
        trigger: on-focus
        params:
          scale: 1.08
          color: "#8b5cf6"

  - id: trip-bc
    type: system
    label: Trip BC
    description: Trip Management
    size: l
    position: { x: 250, y: -120 }
    effects:
      - type: pulse
        trigger: on-focus
        params:
          scale: 1.08
          color: "#06b6d4"

  # Middle: Event Bus
  - id: event-bus
    type: event
    label: Azure Service Bus
    description: Domain Events
    size: l
    position: { x: 0, y: 0 }
    effects:
      - type: glow
        trigger: continuous
        params:
          color: "#22c55e"
          intensity: 0.4
          size: 30

  # Bottom row: Benefits
  - id: decoupled
    type: state
    label: Decoupled
    variant: success
    size: s
    position: { x: -250, y: 120 }
    effects:
      - type: emoji-explosion
        trigger: on-reveal
        params:
          emojis: ["‚úÖ", "üîó"]
          count: 8
          duration: 1200

  - id: scalable
    type: state
    label: Scalable
    variant: success
    size: s
    position: { x: 0, y: 120 }
    effects:
      - type: emoji-explosion
        trigger: on-reveal
        params:
          emojis: ["üìà", "‚ö°"]
          count: 8
          duration: 1200

  - id: velocity-up
    type: state
    label: Velocity ‚Üë
    variant: success
    size: m
    position: { x: 250, y: 120 }
    effects:
      - type: emoji-explosion
        trigger: on-reveal
        params:
          emojis: ["üöÄ", "üí®", "‚≠ê"]
          count: 15
          duration: 1500

edges:
  # BCs publish to event bus (downward)
  - id: e1
    source: ed-bc
    target: event-bus
    type: event
    label: publishes
    sourceAnchor: bottom
    targetAnchor: left

  - id: e2
    source: routing-bc
    target: event-bus
    type: event
    label: publishes
    sourceAnchor: bottom
    targetAnchor: top

  - id: e3
    source: trip-bc
    target: event-bus
    type: event
    label: subscribes
    sourceAnchor: bottom
    targetAnchor: right

  # Event bus to benefits (downward)
  - id: e4
    source: event-bus
    target: decoupled
    type: flow
    sourceAnchor: left
    targetAnchor: top

  - id: e5
    source: event-bus
    target: scalable
    type: flow
    sourceAnchor: bottom
    targetAnchor: top

  - id: e6
    source: event-bus
    target: velocity-up
    type: flow
    sourceAnchor: right
    targetAnchor: top

steps:
  - id: step-1
    title: Enrollment & Demand
    nodeIds: [ed-bc]
    edgeIds: []
    narrative: Start with the E&D bounded context - owning its domain completely.

  - id: step-2
    title: Route Optimization
    nodeIds: [ed-bc, routing-bc]
    edgeIds: []
    narrative: Add the Routing BC - independent, focused on route optimization.

  - id: step-3
    title: Trip Management
    nodeIds: [ed-bc, routing-bc, trip-bc]
    edgeIds: []
    narrative: And the Trip BC - managing the full trip lifecycle.

  - id: step-4
    title: The Event Bus
    nodeIds: [ed-bc, routing-bc, trip-bc, event-bus]
    edgeIds: [e1, e2]
    narrative: Bounded contexts publish domain events to Azure Service Bus.

  - id: step-5
    title: Subscribe to Events
    nodeIds: [ed-bc, routing-bc, trip-bc, event-bus]
    edgeIds: [e1, e2, e3]
    narrative: Other services subscribe to events they care about. No direct coupling.

  - id: step-6
    title: Decoupled
    nodeIds: [ed-bc, routing-bc, trip-bc, event-bus, decoupled]
    edgeIds: [e1, e2, e3, e4]
    narrative: Services are fully decoupled - change one without touching others.

  - id: step-7
    title: Scalable
    nodeIds: [ed-bc, routing-bc, trip-bc, event-bus, decoupled, scalable]
    edgeIds: [e1, e2, e3, e4, e5]
    narrative: Scale each service independently based on demand.

  - id: step-8
    title: Velocity Up!
    nodeIds: [ed-bc, routing-bc, trip-bc, event-bus, decoupled, scalable, velocity-up]
    edgeIds: [e1, e2, e3, e4, e5, e6]
    narrative: "Result: teams move fast, ship independently, velocity goes up!"
