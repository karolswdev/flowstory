# Effects Demo Story
# Showcases the node effects system

title: "Node Effects Demo"
description: "Demonstration of attachable node effects"

camera:
  center: [0, 0]
  zoom: 1

nodes:
  - id: start
    type: actor
    label: "User"
    size: m
    position: { x: -300, y: 0 }
    
  - id: action-1
    type: action
    label: "Submit Form"
    size: m
    position: { x: -100, y: 0 }
    effects:
      - type: pulse
        trigger: on-focus
        params:
          scale: 1.15
          duration: 800
    
  - id: process
    type: system
    label: "Process Request"
    description: "Validate and process"
    size: l
    position: { x: 100, y: 0 }
    effects:
      - type: glow
        trigger: on-focus
        params:
          color: "#3b82f6"
          intensity: 0.6
          size: 25
    
  - id: error
    type: state
    label: "Validation Error"
    variant: danger
    size: s
    position: { x: 100, y: 120 }
    effects:
      - type: shake
        trigger: on-focus
        params:
          intensity: 8
          duration: 600
      - type: glow
        trigger: continuous
        params:
          color: "#ef4444"
          intensity: 0.4
    
  - id: success
    type: state
    label: "Success!"
    variant: success
    size: m
    position: { x: 300, y: 0 }
    effects:
      - type: emoji-explosion
        trigger: on-reveal
        params:
          emojis: ["üéâ", "‚ú®", "‚≠ê", "üí´"]
          count: 20
          duration: 1800
      - type: pulse
        trigger: continuous
        params:
          scale: 1.05
          color: "#22c55e"

edges:
  - id: e1
    source: start
    target: action-1
    label: "initiates"
    sourceAnchor: right
    targetAnchor: left
    
  - id: e2
    source: action-1
    target: process
    label: "submit"
    sourceAnchor: right
    targetAnchor: left
    
  - id: e3
    source: process
    target: error
    label: "invalid"
    type: error
    sourceAnchor: bottom
    targetAnchor: top
    
  - id: e4
    source: process
    target: success
    label: "valid"
    sourceAnchor: right
    targetAnchor: left

steps:
  - id: step-1
    title: "The User"
    nodeIds: [start]
    edgeIds: []
    narrative: "A user enters the flow."
    camera:
      center: [-300, 0]
      zoom: 1.2
      transition: 400

  - id: step-2
    title: "Initiates Action"
    nodeIds: [start, action-1]
    edgeIds: [e1]
    narrative: "User initiates the form submission process."
    camera:
      center: [-200, 0]
      zoom: 1
      transition: 400

  - id: step-3
    title: "Form Submission"
    nodeIds: [start, action-1, process]
    edgeIds: [e1, e2]
    narrative: "The form is submitted for processing."
    camera:
      center: [-100, 0]
      zoom: 0.85
      transition: 400

  - id: step-4
    title: "Validation Error Path"
    nodeIds: [start, action-1, process, error]
    edgeIds: [e1, e2, e3]
    narrative: "When validation fails, the error state appears with shake effect."
    camera:
      center: [0, 40]
      zoom: 0.8
      transition: 400

  - id: step-5
    title: "Success Path"
    nodeIds: [start, action-1, process, success]
    edgeIds: [e1, e2, e4]
    narrative: "When everything validates - celebration with emoji explosion!"
    camera:
      center: [0, 0]
      zoom: 0.7
      transition: 500
